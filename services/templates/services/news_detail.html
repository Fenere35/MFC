{% extends "services/base.html" %}

{% block title %}{{ news.title }} - –ú–§–¶-–û–Ω–ª–∞–π–Ω{% endblock %}

{% block content %}
<div class="container">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <nav class="breadcrumb">
        <a href="{% url 'services:home' %}">–ì–ª–∞–≤–Ω–∞—è</a>
        <span class="separator">/</span>
        <a href="{% url 'services:news_list' %}">–ù–æ–≤–æ—Å—Ç–∏</a>
        <span class="separator">/</span>
        <span class="current">–¢–µ–∫—É—â–∞—è –Ω–æ–≤–æ—Å—Ç—å</span>
    </nav>

    <article class="news-article">
        <header class="article-header">
            <h1>{{ news.title }}</h1>
            
            <div class="article-meta">
                <div class="meta-item">
                    <span class="meta-icon">üìÖ</span>
                    <time datetime="{{ news.published_at|date:'c' }}">
                        {{ news.published_at|date:"d.m.Y H:i" }}
                    </time>
                </div>
                
                <div class="meta-item">
                    <span class="meta-icon">üë§</span>
                    <span>{{ news.author.full_name }}</span>
                </div>
                
                <div class="meta-item">
                    <span class="meta-icon">üè¢</span>
                    <span>{{ news.author.office.name }}</span>
                </div>
                
                <div class="meta-item">
                    <span class="meta-icon">üíº</span>
                    <span>{{ news.author.get_position_display }}</span>
                </div>
            </div>
        </header>

        <div class="article-content">
            {{ news.content|linebreaks }}
        </div>

        <footer class="article-footer">
            <div class="article-actions">
                <a href="{% url 'services:news_list' %}" class="btn-secondary">
                    ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –Ω–æ–≤–æ—Å—Ç–µ–π
                </a>
                
                <div class="social-share">
                    <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è:</span>
                    <button class="share-btn" onclick="shareOnVK()">VK</button>
                    <button class="share-btn" onclick="shareOnTelegram()">Telegram</button>
                    <button class="share-btn" onclick="copyLink()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                </div>
            </div>
        </footer>
    </article>

    <!-- –ë–ª–æ–∫ –ø–æ—Ö–æ–∂–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π -->
    <section class="related-news">
        <h2>–î—Ä—É–≥–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h2>
        <div class="related-grid">
            {% for related_news in related_news_list %}
            <div class="related-card">
                <h3>
                    <a href="{% url 'services:news_detail' related_news.id %}">
                        {{ related_news.title }}
                    </a>
                </h3>
                <div class="related-meta">
                    <span>{{ related_news.published_at|date:"d.m.Y" }}</span>
                    <span>{{ related_news.author.full_name }}</span>
                </div>
            </div>
            {% empty %}
            <p class="no-related">–î—Ä—É–≥–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
            {% endfor %}
        </div>
    </section>
</div>

<style>
.breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 30px;
    font-size: 0.9rem;
    color: #7f8c8d;
}

.breadcrumb a {
    color: #3498db;
    text-decoration: none;
}

.breadcrumb a:hover {
    text-decoration: underline;
}

.breadcrumb .separator {
    color: #bdc3c7;
}

.breadcrumb .current {
    color: #2c3e50;
    font-weight: 500;
}

.news-article {
    background: white;
    border-radius: 12px;
    padding: 40px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    margin-bottom: 40px;
}

.article-header {
    text-align: center;
    margin-bottom: 40px;
    padding-bottom: 30px;
    border-bottom: 2px solid #f8f9fa;
}

.article-header h1 {
    color: #eee;
    font-size: 2.2rem;
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: 20px;
}

.article-meta {
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #7f8c8d;
    font-size: 0.95rem;
}

.meta-icon {
    font-size: 1.1rem;
}

.article-content {
    line-height: 1.8;
    font-size: 1.1rem;
    color: #34495e;
    margin-bottom: 40px;
}

.article-content p {
    margin-bottom: 1.5em;
}

.article-footer {
    border-top: 2px solid #f8f9fa;
    padding-top: 30px;
}

.article-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
}

.btn-secondary {
    background: #95a5a6;
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 6px;
    text-decoration: none;
    display: inline-block;
    font-weight: 500;
    transition: all 0.3s ease;
}

.btn-secondary:hover {
    background: #7f8c8d;
    transform: translateY(-1px);
}

.social-share {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

.share-btn {
    background: #ecf0f1;
    color: #2c3e50;
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.3s ease;
}

.share-btn:hover {
    background: #3498db;
    color: white;
}

.related-news {
    margin-top: 50px;
}

.related-news h2 {
    color: #2c3e50;
    margin-bottom: 25px;
    font-size: 1.5rem;
}

.related-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}

.related-card {
    background: white;
    border: 1px solid #e1e8ed;
    border-radius: 8px;
    padding: 20px;
    transition: all 0.3s ease;
}

.related-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.related-card h3 {
    margin-bottom: 10px;
}

.related-card a {
    color: #2c3e50;
    text-decoration: none;
    font-size: 1.1rem;
    line-height: 1.4;
}

.related-card a:hover {
    color: #3498db;
}

.related-meta {
    display: flex;
    gap: 15px;
    font-size: 0.85rem;
    color: #7f8c8d;
}

.no-related {
    text-align: center;
    color: #7f8c8d;
    font-style: italic;
    grid-column: 1 / -1;
    padding: 40px;
}

.container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .news-article {
        padding: 25px;
    }
    
    .article-header h1 {
        font-size: 1.8rem;
    }
    
    .article-meta {
        flex-direction: column;
        gap: 15px;
        align-items: center;
    }
    
    .article-actions {
        flex-direction: column;
        align-items: stretch;
    }
    
    .social-share {
        justify-content: center;
    }
}

@media (max-width: 480px) {
    .news-article {
        padding: 20px;
    }
    
    .article-header h1 {
        font-size: 1.5rem;
    }
    
    .related-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
function shareOnVK() {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent('{{ news.title }}');
    window.open(`https://vk.com/share.php?url=${url}&title=${title}`, '_blank');
}

function shareOnTelegram() {
    const url = encodeURIComponent(window.location.href);
    const text = encodeURIComponent('{{ news.title }}');
    window.open(`https://t.me/share/url?url=${url}&text=${text}`, '_blank');
}

function copyLink() {
    navigator.clipboard.writeText(window.location.href).then(() => {
        alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
    });
}
</script>
{% endblock %}